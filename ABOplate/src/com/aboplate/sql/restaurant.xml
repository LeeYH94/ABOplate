<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Config 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Restaurant">
	
	<select id="getNameList" resultType="string">
		SELECT DISTINCT restaurant_name FROM RESTAURANT 
	</select>
	
	<select id="getFoodList" resultType="string">
		SELECT DISTINCT restaurant_food_category FROM RESTAURANT
	</select>
	
	<select id="getLocalCurrencyList" resultType="string">
		SELECT DISTINCT restaurant_name FROM RESTAURANT 
		WHERE restaurant_local_currency = 'O' 
	</select>

	<select id="getBestRestaurantList" resultType="string">
		SELECT DISTINCT restaurant_name FROM RESTAURANT WHERE restaurant_model = 'O'
	</select>
	

	<select id="getAddressList" resultType="string">
		SELECT DISTINCT SUBSTR(restaurant_address, 1, INSTR(restaurant_address, ' ', 1, 1)) FROM RESTAURANT
	</select>
	
	<select id="getMemberChoiceRestaurantList" parameterType="map" resultType="restaurantBean">
		SELECT restaurant_name, restaurant_ration_total, 
		restaurant_address, restaurant_hit FROM RESTAURANT
		WHERE restaurant_address LIKE '%'||#address#||'%'
		AND restaurant_food_category = #{category} AND
		restaurant_age_group = ${age_group}
		WHERE restaurant_ration_total >= 3.5
		ORDER BY restaurant_ration_total DESC
	</select>
	
	<select id="getPopularRestaurant" resultType="restaurantBean">
		SELECT restaurant_name, restaurant_ration_total, 
		restaurant_address, restaurant_hit FROM RESTAURANT
		WHERE restaurant_ration_total >= 3.5
	</select>
	
	<select id="searchRestaurant" parameterType="map" resultType="restaurantBean">
		SELECT restaurant_name, restaurant_ration_total,
		restaurant_address, restaurant_hit FROM RESTAURANT
		WHERE ${keyField} LIKE '%'||#keyWord#||'%'
		ORDER BY restaurant_ration_total DESC
	</select>
	
	

	
</mapper>