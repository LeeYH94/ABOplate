<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Config 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Restaurant">
	
	<select id="getNameList" resultType="string">
		SELECT DISTINCT RESTAURANT_NAME FROM RESTAURANT 
	</select>
	
	<select id="getFoodCategoryList" resultType="string">
		SELECT DISTINCT RESTAURANT_FOOD_CATEGORY FROM RESTAURANT
	</select>
	
	<select id="getLocalCurrencyList" resultType="string">
		SELECT DISTINCT RESTAURANT_NAME FROM RESTAURANT 
		WHERE RESTAURANT_LOCAL_CURRENCY = 'O' 
	</select>

	<select id="getBestRestaurantList" resultType="string">
		SELECT DISTINCT RESTAURANT_NAME FROM RESTAURANT WHERE RESTAURANT_BEST = 'O'
	</select>
	

	<select id="getAddressList" resultType="string">
		SELECT DISTINCT SUBSTR(RESTAURANT_ADDRESS, 1, INSTR(RESTAURANT_ADDRESS, ' ', 1, 1)) FROM RESTAURANT
	</select>
	
	<select id="getMemberChoiceRestaurantList" parameterType="map" resultType="restaurantBean">
		SELECT RESTAURANT_NUM, RESTAURANT_NAME, RESTAURANT_RATION_TOTAL, 
		RESTAURANT_ADDRESS, RESTAURANT_HIT FROM RESTAURANT
		WHERE RESTAURANT_ADDRESS_ROAD LIKE '%'||#{address}||'%'
		AND RESTAURANT_FOOD_CATEGORY = #{category}
		ORDER BY RESTAURANT_RATION_TOTAL DESC
	</select>
	
	<select id="getPopularRestaurant" resultType="restaurantBean">
		SELECT RESTAURANT_NUM, RESTAURANT_NAME, RESTAURANT_RATION_TOTAL, 
		RESTAURANT_ADDRESS, RESTAURANT_HIT FROM RESTAURANT
		WHERE RESTAURANT_RATION_TOTAL >= 3.5
	</select>
	
	<select id="searchRestaurant" parameterType="map" resultType="restaurantBean">
		SELECT RESTAURANT_NAME, RESTAURANT_RATION_TOTAL,
		RESTAURANT_ADDRESS, RESTAURANT_HIT FROM RESTAURANT
		WHERE ${keyField} LIKE '%'||#{keyWord}||'%'
		ORDER BY RESTAURANT_RATION_TOTAL DESC
	</select>
	
	<select id="getRestaurantInfo" parameterType="_int" resultType="restaurantBean">
		SELECT * FROM RESTAURANT WHERE RESTAURANT_NUM = ${num}
	</select>
	
	<select id="getLocalCurrencyCnt" resultType="_int">
		SELECT COUNT(*) FROM RESTAURANT WHERE RESTAURANT_LOCAL_CURRENCY = 'O'
	</select>
	
	
	
</mapper>