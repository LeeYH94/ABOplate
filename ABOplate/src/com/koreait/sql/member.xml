<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Config 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Member">
	<!--
		bean객체로 받아서 각각 컬럼에 값 넣어줌
		1이면 성공 0이면 실패
	 -->
	<insert id="join" parameterType="memberBean" >
	INSERT INTO MEMBER
	VALUES(
	#{member_id},#{member_email},#{member_password},#{member_nickname},${member_stamp},#{member_preference_food},
	#{member_region},${member_age_group},${member_report},#{member_last_report}, 1
	)
	</insert>
	
	<!--
		map객체로 받아서 db에 있는지 확인 1이면 성공 0이면 실패 
	 -->
	<select id="login" parameterType="map" resultType="_int">
		SELECT COUNT(*) FROM MEMBER
		WHERE MEMBER_ID = #{id} AND MEMBER_PW = #{pw}
	</select>
	
	<!--
		map객체로 받아서 db에 있는지 확인해서 아이디값이 있으면 리턴
	 -->
	<select id="findId" parameterType="map" resultType="string">
		SELECT member_id FROM MEMBER WHERE member_email = #{email} AND member_name = #{name}
	</select>
	
	<!--
		map객체로 받아서 db에 있는지 확인해서 1이면 성공 0이면 실패
	 -->
	<update id="updatePw" parameterType="map" resultType="_int">
		UPDATE MEMBER SET
		member_pw = #{new_pw}
		WHERE member_id = #{id}
	</update>
	
</mapper>